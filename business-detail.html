<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Business — LocalFind</title>
  <meta name="description" content="Business details on LocalFind">
  <link rel="canonical" href="/business-detail.html">
  <meta property="og:image" content="assets/images/og-image.jpg">
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/cards.css">
  <link rel="stylesheet" href="css/footer.css">
  <link rel="stylesheet" href="css/animations.css">
</head>
<body>
  <header id="site-header"></header>
  <main class="container">
    <nav class="breadcrumb">Home › Directory › <span id="biz-category">Category</span> › <span id="biz-name">Business</span></nav>
    <section id="biz-hero" class="biz-hero">
      <div class="cover"></div>
      <div class="biz-meta">
        <div class="avatar" id="biz-avatar">LF</div>
        <div class="meta-text"><h1 id="biz-title">Business Name</h1><div id="biz-badges"></div><div id="biz-rating"></div></div>
      </div>
    </section>

    <section class="biz-content">
      <div class="main-col">
        <article id="biz-desc"></article>
        <div id="photo-gallery" class="photo-gallery"></div>
        <section id="reviews">
          <h3>Reviews</h3>
          <div id="reviews-list"></div>
          <button class="btn" id="write-review">Write a Review</button>
          <form id="review-form" class="hidden">
            <input name="name" placeholder="Your name">
            <select name="rating"><option>5</option><option>4</option><option>3</option><option>2</option><option>1</option></select>
            <textarea name="comment" placeholder="Your review"></textarea>
            <button class="btn btn-cta" type="submit">Submit Review</button>
          </form>
        </section>
      </div>
      <aside class="sidebar">
        <div class="contact-card" id="biz-contact"></div>
        <div id="biz-hours" class="hours-card"></div>
        <div id="biz-tags" class="tags-card"></div>
        <div id="biz-map" class="small-map"></div>
      </aside>
    </section>

    <section id="related" class="related-section"><h3>Related Listings</h3><div id="related-list" class="card-grid"></div></section>
  </main>

  <footer id="site-footer"></footer>

  <script src="js/config.js"></script>
  <script src="js/data.js"></script>
  <script src="js/main.js"></script>
  <script src="js/map.js"></script>
  <script src="js/directory.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      // Check if data exists
      if (!window.LISTINGS || window.LISTINGS.length === 0) {
        document.querySelector('.biz-content').innerHTML = '<div style="text-align:center;padding:4rem 2rem;"><h3 style="color:var(--text-primary);margin-bottom:1rem;">No Business Data Available</h3><p style="color:var(--text-muted);">Add your business data to js/data.js</p><a href="index.html" class="btn btn-cta" style="margin-top:2rem;">Go to Homepage</a></div>';
        return;
      }
      
      const params = new URLSearchParams(location.search);
      const id = params.get('id');
      const biz = window.LISTINGS.find(b=>b.id===id);
      
      // If business not found, show error
      if (!biz) {
        document.querySelector('.biz-content').innerHTML = '<div style="text-align:center;padding:4rem 2rem;"><h3 style="color:var(--text-primary);margin-bottom:1rem;">Business Not Found</h3><p style="color:var(--text-muted);">The business you are looking for does not exist.</p><a href="directory.html" class="btn btn-cta" style="margin-top:2rem;">Browse Directory</a></div>';
        return;
      }
      
      // Render basic info
      document.getElementById('biz-title').textContent = biz.name;
      document.getElementById('biz-desc').textContent = biz.description;
      document.getElementById('biz-category').textContent = biz.category;
      document.getElementById('biz-name').textContent = biz.name;
      document.getElementById('biz-contact').innerHTML = `<p>${biz.address}</p><p><a href=\"tel:${biz.phone}\">${biz.phone}</a></p><p><a href=\"${biz.mapLink}\">View on map</a></p>`;
      
      // Render related listings
      const relatedList = document.getElementById('related-list');
      const related = window.LISTINGS.filter(b=>b.categorySlug===biz.categorySlug && b.id!==biz.id).slice(0,3);
      if (related.length > 0) {
        relatedList.innerHTML = related.map(b=>window.renderCard(b)).join('');
      } else {
        relatedList.innerHTML = '<p style="text-align:center;color:var(--text-muted);padding:2rem;">No related listings available.</p>';
      }
    });
  </script>
</body>
</html>